#include <stdio.h> 
#include <stdlib.h> 
typedef struct DNode { 
int data; 
struct DNode *prev, *next; 
} DNode; 
DNode *head = NULL; 
void insert_at_pos(int pos, int val) { 
int i; 
DNode *newnode, *p; 
newnode = (DNode*) malloc(sizeof(DNode)); 
newnode->data = val; 
newnode->prev = newnode->next = NULL; 
if (pos <= 1 || head == NULL) { /* insert at front */ 
newnode->next = head; 
if (head) head->prev = newnode; 
head = newnode; 
return; 
} 
p = head; 
for (i = 1; i < pos - 1 && p->next != NULL; i++) p = p->next; 
newnode->next = p->next; 
newnode->prev = p; 
if (p->next) p->next->prev = newnode; 
p->next = newnode; 
} 
void delete_end() { 
DNode *p = head; 
if (p == NULL) { printf("List empty.\n"); return; } 
while (p->next != NULL) p = p->next; 
if (p->prev) p->prev->next = NULL; 
else head = NULL; 
printf("Deleted element %d from end.\n", p->data); 
free(p); 
} 
void display() { 
DNode *p = head; 
if (p == NULL) { printf("List empty.\n"); return; } 
printf("List (forward): "); 
while (p) { printf("%d ", p->data); p = p->next; } 
printf("\n"); 
} 
int main() { 
int choice, val, pos; 
while (1) { 
printf("\n1.InsertAtPos 2.DeleteEnd 3.Display 4.Exit\nChoice: "); 
scanf("%d", &choice); 
switch (choice) { 
case 1: printf("Enter position and value: "); scanf("%d%d", &pos, &val); insert_at_pos(pos, val); break; 
case 2: delete_end(); break; 
case 3: display(); break; 
case 4: exit(0); 
default: printf("Invalid choice.\n"); 
} 
} 
return 0; 
}